var jpictura=jpictura||{};jpictura.debounce=function(t,i,a){var e;return function(){var n=this,o=arguments,r=function(){e=null,a||t.apply(n,o)},s=a&&!e;clearTimeout(e),e=setTimeout(r,i),s&&t.apply(n,o)}},jpictura.offWindowWidthResize=function(t){$(window).off("."+t)},jpictura.onWindowWidthResize=function(t,i){var a=$(window),e=a.width();a.on("resize."+t,function(){var t=a.width();e!==t&&(i(),e=t)})};var jpictura=jpictura||{};jpictura.heightCalculator=function(t,i,a){function e(t){n(t),o(t),s()}function n(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;u=t/((t-i)/a+e)}function o(t){var i=0,a=f.layout.idealRowHeight,e=f.layout.maxWidthHeightRatio;e*a>=t?(f.debug&&d("The max width/height ratio "+e+" is too big for row width "+t+"px."),c=t*e):c=t/((t+i)/a-e)}function r(t,i){var a,e,n=0;do a=g(t,h,!1,f),a>i?c=h:u=h,s(u,c),e=!1,a>i&&(e=!0),i-a>f.algorithm.epsilon&&(e=!0),++n>=f.algorithm.maxIterationCount&&(e=!1);while(e);return n>=f.algorithm.maxIterationCount&&f.debug&&d("Max "+n+" iterations reached. Current precision: "+(i-a)+"."),h}function s(){h=(u+c)/2}function l(t,i,a){t=Math.floor(t);var e;do e=g(i,t,!0,f);while(a>e&&t++);return t}var u,c,h,d=i,g=t,f=a;this.getHeight=function(t,i){if(0===t.length)return 0;e(i);var a=r(t,i);return a=l(a,t,i)}};/*!
 * jPictura v1.1.9
 * https://github.com/anmarcek/jpictura.git
 *
 * Copyright (c) 2014-2016 Anton MarÄek
 * Released under the MIT license
 *
 * Date: 2016-03-11T06:15:53.974Z
 */
var jpictura=jpictura||{};!function(t){function i(t,i){t.addClass(i.classes.container),t.toggleClass("stretch-images",i.layout.stretchImages),t.toggleClass("center-images",i.layout.centerImages),t.toggleClass("disable-cropping-images",!i.layout.allowCropping),t.toggleClass("fade-in-items",i.effects.fadeInItems);var e=t.find(i.selectors.item);e.addClass(i.classes.item);var o=e.find(i.selectors.image);o.addClass(i.classes.image),a(t,e,i,n)}function a(t,i,a,n){a.waitForImages?e(t,i,a,n):n(t,i,a)}function e(i,a,e,n){function o(t,o){var s=o.width/o.height;z(t,s),++r===a.size()&&n(i,a,e)}var r=0;a.each(function(){var i=t(this),a=i.find(e.selectors.image),n=new Image;n.src=a.attr("src"),t(n).load(function(){o(i,n)})})}function n(t,i,a){var e=jpictura.debounce(function(){o(t,i,a)},a.responsive.debounce);jpictura.offWindowWidthResize(F),a.responsive.enabled&&jpictura.onWindowWidthResize(F,e),e()}function o(t,i,a){var e,n=(new Date).getTime(),o=10,s=0,l=[];do{i.addClass(a.classes.invisible),i.addClass(a.classes.hidden);var u=P(t);l.push(u);var c=!1;if(l.length>=3){var h=l[l.length-3],d=l[l.length-2];h>d&&h===u&&(u=d,c=!0)}r(u,i,a);var g=P(t);if(l.push(g),e=!1,u!==g){var f=l[l.length-2];e=!c||f!==g}}while(e&&++s<=o);var p=(new Date).getTime();s>o&&a.debug?L("Max redraw tries of "+o+"reached. Gallery redraw failed."):a.debug&&L("Gallery redrawn in "+(p-n)+" milliseconds.")}function r(i,a,e){var n=[],o=i-2*e.layout.rowPadding,r=new e.heightCalculator(b,L,e);a.each(function(){var i=t(this);if(0===n.length)n.push(i);else{var a=n.slice(0);if(a.push(i),s(a,o,e)){var c=l(n,o,r,e),h=l(a,o,r,e),d=t.fn.jpictura.evaluate(c,e),g=t.fn.jpictura.evaluate(h,e);d>g?n.push(i):(u(n,o,c,!1,e),n=[],n.push(i))}else n.push(i)}});var c=s(n,o,e)||e.layout.justifyLastRow?l(n,o,r,e):e.layout.idealRowHeight;u(n,o,c,!0,e)}function s(t,i,a){for(var e=(t.length-1)*a.layout.itemSpacing,n=0;n<t.length;n++)e+=x(t[n],a.layout.idealRowHeight,a);return e>i}function l(t,i,a,e){var n=j(t,i,e),o=a.getHeight(t,n);return o}function u(t,i,a,e,n){for(var o=b(t,a,!0,n),r=j(t,i,n),s={row:t,width:i,height:a,isLastRow:e,itemsSpaceWidth:r,itemsWidthDelta:o-r,unassignedItemsWidthDelta:o-r},l=c(t,n),u=0;u<l.length;u++)h(l[u],s,n)}function c(t,i){var a=t.slice(0);return a.sort(function(t,a){return H(a,!0,i)-H(t,!0,i)}),a}function h(t,i,a){var e=i.row,n=i.isLastRow,o=t===e[0],r=t===e[e.length-1],s=d(t,i,a),l=i.height,u=t.find(a.selectors.image);f(t,s,l),p(t,a),m(t,n,o,r,a),v(t,o,r,a),w(t,r,n,a),y(t,s,l,a),C(u,s,l,a)}function d(t,i,a){var e=x(t,i.height,a),n=g(e,i),o=Math.floor(e)-n;return o}function g(t,i){if(i.unassignedItemsWidthDelta<=0)return 0;var a=Math.ceil(t/i.itemsSpaceWidth*i.itemsWidthDelta);return i.unassignedItemsWidthDelta<a&&(a=i.unassignedItemsWidthDelta),i.unassignedItemsWidthDelta-=a,a}function f(t,i,a){t.width(i),t.height(a)}function p(t,i){t.removeClass(i.classes.invisible),t.removeClass(i.classes.hidden)}function m(t,i,a,e,n){t.toggleClass(n.classes.lastRow,i),t.toggleClass(n.classes.firstInRow,a),t.toggleClass(n.classes.lastInRow,e)}function v(t,i,a,e){e.layout.applyRowPadding&&(t.css("margin-left",(i?e.layout.rowPadding:0)+"px"),t.css("margin-right",(a?e.layout.rowPadding:0)+"px"))}function w(t,i,a,e){e.layout.applyItemSpacing&&(t.css("margin-right",(i?0:e.layout.itemSpacing)+"px"),t.css("margin-bottom",(a?0:e.layout.itemSpacing)+"px"))}function y(t,i,a,e){var n=H(t,!1,e)*a;t.toggleClass("stretch-by-height",n>=i),t.toggleClass("stretch-by-width",i>n);var o=R(n,i,e);t.toggleClass("cropped-if-stretched",o)}function C(t,i,a){t.toggleClass("horizontal-misfit",W(t,i)),t.toggleClass("vertical-misfit",I(t,a))}function R(t,i,a){return Math.abs(t-i)>a.layout.croppingEpsilon}function W(t,i){return Math.abs(t.width()-i)>1}function I(t,i){return Math.abs(t.height()-i)>1}function b(t,i,a,e){for(var n=0,o=0;o<t.length;o++){var r=x(t[o],i,e);a&&(r=Math.floor(r)),n+=r}return n}function j(t,i,a){return i-(t.length-1)*a.layout.itemSpacing}function x(t,i,a){var e=H(t,!0,a)*i;return e}function H(t,i,a){var e=F+"-ratio",n=t.data(e);if(void 0===n&&(n=M(t,a),t.data(e,n)),i){if(n<=a.layout.minWidthHeightRatio)return a.layout.minWidthHeightRatio;if(n>=a.layout.maxWidthHeightRatio)return a.layout.maxWidthHeightRatio}return n}function M(t,i){var a=D(t,i),e=S(t,i),n=a/e;return n}function z(t,i){var a=F+"-ratio";t.data(a,i)}function D(t,i){var a=F+"-width",e=t.data(a);if(void 0===e){var n=t.find(i.selectors.image);e=n.prop("naturalWidth"),t.data(a,e)}return e}function S(t,i){var a=F+"-height",e=t.data(a);if(void 0===e){var n=t.find(i.selectors.image);e=n.prop("naturalHeight"),t.data(a,e)}return e}function P(t){return t.width()}function L(t){window.console&&console.log(T+": "+t)}t.fn.jpictura=function(a){var e=t.extend(!0,{},t.fn.jpictura.defaults,a);return this.each(function(){i(t(this),e)}),this};var T="jPictura",F=T.toLowerCase();t.fn.jpictura.defaults={selectors:{item:".item",image:"img"},classes:{container:F,item:F+"-item",image:F+"-image",lastRow:F+"-last-row",firstInRow:F+"-first-in-row",lastInRow:F+"-last-in-row",invisible:F+"-invisible",hidden:F+"-hidden",offContentFlow:F+"-off-content-flow"},layout:{rowPadding:0,applyRowPadding:!0,itemSpacing:5,applyItemSpacing:!0,idealRowHeight:180,minWidthHeightRatio:1/3,maxWidthHeightRatio:3,stretchImages:!0,allowCropping:!0,croppingEpsilon:3,centerImages:!0,justifyLastRow:!1},effects:{fadeInItems:!1},responsive:{enabled:!0,onWindowWidthResize:!0,onContainerWidthResize:!1,debounce:250},waitForImages:!0,heightCalculator:jpictura.heightCalculator,algorithm:{epsilon:.01,maxIterationCount:50},debug:!1},t.fn.jpictura.evaluate=function(t,i){return Math.abs(t-i.layout.idealRowHeight)}}(jQuery);
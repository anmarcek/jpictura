var jpictura=jpictura||{};jpictura.debounce=function(t,i,e){var a;return function(){var n=this,o=arguments,r=function(){a=null,e||t.apply(n,o)},s=e&&!a;clearTimeout(a),a=setTimeout(r,i),s&&t.apply(n,o)}},jpictura.throttle=function(t,i,e,a){var n,o,r,s,l=0;e=e?e:!1,a=a?a:!0;var u=function(){l=e===!1?0:(new Date).getTime(),n=null,s=t.apply(o,r),n||(o=null,r=null)};return function(){var c=(new Date).getTime();l||e!==!1||(l=c);var h=i-(c-l);return o=this,r=arguments,0>=h||h>i?(n&&(clearTimeout(n),n=null),l=c,s=t.apply(o,r),n||(o=null,r=null)):n||a===!1||(n=setTimeout(u,h)),s}},jpictura.offWindowWidthResize=function(t){$(window).off("."+t)},jpictura.onWindowWidthResize=function(t,i){var e=$(window),a=e.width();e.on("resize."+t,function(){var t=e.width();a!==t&&(i(),a=t)})};var jpictura=jpictura||{};jpictura.heightCalculator=function(t,i,e){function a(t){n(t),o(t),s()}function n(t){var i=0,e=f.layout.idealRowHeight,a=f.layout.maxWidthHeightRatio;u=t/((t-i)/e+a)}function o(t){var i=0,e=f.layout.idealRowHeight,a=f.layout.maxWidthHeightRatio;a*e>=t?(f.debug&&g("The max width/height ratio "+a+" is too big for row width "+t+"px."),c=t*a):c=t/((t+i)/e-a)}function r(t,i){var e,a,n=0;do e=d(t,h,!1,f),e>i?c=h:u=h,s(u,c),a=!1,e>i&&(a=!0),i-e>f.algorithm.epsilon&&(a=!0),++n>=f.algorithm.maxIterationCount&&(a=!1);while(a);return n>=f.algorithm.maxIterationCount&&f.debug&&g("Max "+n+" iterations reached. Current precision: "+(i-e)+"."),h}function s(){h=(u+c)/2}function l(t,i,e){t=Math.floor(t);var a;do a=d(i,t,!0,f);while(e>a&&t++);return t}var u,c,h,g=i,d=t,f=e;this.getHeight=function(t,i){if(0===t.length)return 0;a(i);var e=r(t,i);return e=l(e,t,i)}};/*!
 * jPictura v1.1.9
 * https://github.com/anmarcek/jpictura.git
 *
 * Copyright (c) 2014-2016 Anton MarÄek
 * Released under the MIT license
 *
 * Date: 2016-03-10T15:37:51.420Z
 */
var jpictura=jpictura||{};!function(t){function i(t,i){t.addClass(i.classes.container),t.toggleClass("stretch-images",i.layout.stretchImages),t.toggleClass("center-images",i.layout.centerImages),t.toggleClass("disable-cropping-images",!i.layout.allowCropping),t.toggleClass("fade-in-items",i.effects.fadeInItems);var a=t.find(i.selectors.item);a.addClass(i.classes.item);var o=a.find(i.selectors.image);o.addClass(i.classes.image),e(t,a,i,n)}function e(t,i,e,n){e.waitForImages?a(t,i,e,n):n(t,i,e)}function a(i,e,a,n){function o(t,o){var s=o.width/o.height;T(t,s),++r===e.size()&&n(i,e,a)}var r=0;e.each(function(){var i=t(this),e=i.find(a.selectors.image),n=new Image;n.src=e.attr("src"),t(n).load(function(){o(i,n)})})}function n(t,i,e){var a;if("debounce"===e.responsive.delayAlgorithm)a=jpictura.debounce(function(){o(t,i,e)},e.responsive.delay);else{if("throttle"!==e.responsive.delayAlgorithm)throw"The specified delay algorithm '"+e.responsive.delayAlgorithm+"' is not supported.";a=jpictura.throttle(function(){o(t,i,e)},e.responsive.delay,!1,!0)}jpictura.offWindowWidthResize(A),e.responsive.enabled&&jpictura.onWindowWidthResize(A,a),a()}function o(t,i,e){var a,n=(new Date).getTime(),o=0,s=[];do{i.addClass(e.classes.invisible),i.addClass(e.classes.hidden);var l=S(t);s.push(l);var u=!1;if(s.length>=3){var c=s[s.length-3],h=s[s.length-2];c>h&&c===l&&(l=h,u=!0)}r(l,i,e);var g=S(t);if(s.push(g),a=!1,l!==g){var d=s[s.length-2];a=!u||d!==g}}while(a&&++o<=10);var f=(new Date).getTime();e.debug&&P("Gallery redrawn in "+(f-n)+" milliseconds.")}function r(i,e,a){var n=[],o=i-2*a.layout.rowPadding,r=new a.heightCalculator(I,P,a);e.each(function(){var i=t(this);if(0===n.length)n.push(i);else{var e=n.slice(0);if(e.push(i),s(e,o,a)){var c=l(n,o,r,a),h=l(e,o,r,a),g=t.fn.jpictura.evaluate(c,a),d=t.fn.jpictura.evaluate(h,a);g>d?n.push(i):(u(n,o,c,!1,a),n=[],n.push(i))}else n.push(i)}});var c=s(n,o,a)||a.layout.justifyLastRow?l(n,o,r,a):a.layout.idealRowHeight;u(n,o,c,!0,a)}function s(t,i,e){for(var a=(t.length-1)*e.layout.itemSpacing,n=0;n<t.length;n++)a+=H(t[n],e.layout.idealRowHeight,e);return a>i}function l(t,i,e,a){var n=b(t,i,a),o=e.getHeight(t,n);return o}function u(t,i,e,a,n){for(var o=I(t,e,!0,n),r=b(t,i,n),s={row:t,width:i,height:e,isLastRow:a,itemsSpaceWidth:r,itemsWidthDelta:o-r,unassignedItemsWidthDelta:o-r},l=c(t,n),u=0;u<l.length;u++)h(l[u],s,n)}function c(t,i){var e=t.slice(0);return e.sort(function(t,e){return x(e,!0,i)-x(t,!0,i)}),e}function h(t,i,e){var a=i.row,n=i.isLastRow,o=t===a[0],r=t===a[a.length-1],s=g(t,i,e),l=i.height,u=t.find(e.selectors.image);f(t,s,l),p(t,e),m(t,n,o,r,e),v(t,o,r,e),w(t,r,n,e),y(t,s,l,e),C(u,s,l,e)}function g(t,i,e){var a=H(t,i.height,e),n=d(a,i),o=Math.floor(a)-n;return o}function d(t,i){if(i.unassignedItemsWidthDelta<=0)return 0;var e=Math.ceil(t/i.itemsSpaceWidth*i.itemsWidthDelta);return i.unassignedItemsWidthDelta<e&&(e=i.unassignedItemsWidthDelta),i.unassignedItemsWidthDelta-=e,e}function f(t,i,e){t.width(i),t.height(e)}function p(t,i){t.removeClass(i.classes.invisible),t.removeClass(i.classes.hidden)}function m(t,i,e,a,n){t.toggleClass(n.classes.lastRow,i),t.toggleClass(n.classes.firstInRow,e),t.toggleClass(n.classes.lastInRow,a)}function v(t,i,e,a){a.layout.applyRowPadding&&(t.css("margin-left",(i?a.layout.rowPadding:0)+"px"),t.css("margin-right",(e?a.layout.rowPadding:0)+"px"))}function w(t,i,e,a){a.layout.applyItemSpacing&&(t.css("margin-right",(i?0:a.layout.itemSpacing)+"px"),t.css("margin-bottom",(e?0:a.layout.itemSpacing)+"px"))}function y(t,i,e,a){var n=x(t,!1,a)*e;t.toggleClass("stretch-by-height",n>=i),t.toggleClass("stretch-by-width",i>n);var o=R(n,i,a);t.toggleClass("cropped-if-stretched",o)}function C(t,i,e){t.toggleClass("horizontal-misfit",W(t,i)),t.toggleClass("vertical-misfit",j(t,e))}function R(t,i,e){return Math.abs(t-i)>e.layout.croppingEpsilon}function W(t,i){return Math.abs(t.width()-i)>1}function j(t,i){return Math.abs(t.height()-i)>1}function I(t,i,e,a){for(var n=0,o=0;o<t.length;o++){var r=H(t[o],i,a);e&&(r=Math.floor(r)),n+=r}return n}function b(t,i,e){return i-(t.length-1)*e.layout.itemSpacing}function H(t,i,e){var a=x(t,!0,e)*i;return a}function x(t,i,e){var a=A+"-ratio",n=t.data(a);if(void 0===n&&(n=D(t,e),t.data(a,n)),i){if(n<=e.layout.minWidthHeightRatio)return e.layout.minWidthHeightRatio;if(n>=e.layout.maxWidthHeightRatio)return e.layout.maxWidthHeightRatio}return n}function D(t,i){var e=z(t,i),a=M(t,i),n=e/a;return n}function T(t,i){var e=A+"-ratio";t.data(e,i)}function z(t,i){var e=A+"-width",a=t.data(e);if(void 0===a){var n=t.find(i.selectors.image);a=n.prop("naturalWidth"),t.data(e,a)}return a}function M(t,i){var e=A+"-height",a=t.data(e);if(void 0===a){var n=t.find(i.selectors.image);a=n.prop("naturalHeight"),t.data(e,a)}return a}function S(t){return t.width()}function P(t){window.console&&console.log(L+": "+t)}t.fn.jpictura=function(e){var a=t.extend(!0,{},t.fn.jpictura.defaults,e);return this.each(function(){i(t(this),a)}),this};var L="jPictura",A=L.toLowerCase();t.fn.jpictura.defaults={selectors:{item:".item",image:"img"},classes:{container:A,item:A+"-item",image:A+"-image",lastRow:A+"-last-row",firstInRow:A+"-first-in-row",lastInRow:A+"-last-in-row",invisible:A+"-invisible",hidden:A+"-hidden",offContentFlow:A+"-off-content-flow"},layout:{rowPadding:0,applyRowPadding:!0,itemSpacing:5,applyItemSpacing:!0,idealRowHeight:180,minWidthHeightRatio:1/3,maxWidthHeightRatio:3,stretchImages:!0,allowCropping:!0,croppingEpsilon:3,centerImages:!0,justifyLastRow:!1},effects:{fadeInItems:!1},responsive:{enabled:!0,onWindowWidthResize:!0,onContainerWidthResize:!1,delayAlgorithm:"debounce",delay:200},waitForImages:!0,heightCalculator:jpictura.heightCalculator,algorithm:{epsilon:.01,maxIterationCount:100},debug:!1},t.fn.jpictura.evaluate=function(t,i){return Math.abs(t-i.layout.idealRowHeight)}}(jQuery);